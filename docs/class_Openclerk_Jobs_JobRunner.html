<!DOCTYPE HTML>
<html>
<head>
  <title>PHPDoc2 - openclerk</title>
  <link rel="stylesheet" type="text/css" href="default.css">
</head>
<body>
<nav>
  <a href="index.html">Root</a>
</nav>

<div class="content">
<ul><li>Openclerk\Jobs\JobRunner</li></ul>
<h1>
  <small>abstract class</small>

  <a href="namespace_Openclerk_Jobs.html" class="">Openclerk\Jobs</a>  \
  <a href="class_Openclerk_Jobs_JobRunner.html" class="">JobRunner</a></h1>




<dl>
  <dt>All known direct subclasses:</dt>
  <dd>
    <a href="class_Core_OpenclerkJobRunner.html" class="">OpenclerkJobRunner</a>  </dd>
</dl>


<hr>

<p>A helper class to select job instances, run them, and manage their pass/fail statuses. Job queueing is managed by <a href="class_Openclerk_Jobs_JobQueuer.html" class="">JobQueuer</a>.</p><p>TODO create more intelligent job selection methods</p><dl></dl>
<hr>

<h2>Method Summary</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
<tr><td><a href="class_Openclerk_Jobs_JobRunner.html#__construct" class="">__construct()</a></td><td></td></tr><tr><td><a href="class_Openclerk_Jobs_JobRunner.html#createJob" class="">createJob($job, Connection $db, Logger $logger)</a></td><td>From the given $job arguments, create a new <a href="interface_Openclerk_Jobs_Job.html" class="">Job</a> instance that can be run.</td></tr><tr><td><a href="class_Openclerk_Jobs_JobRunner.html#defaultFindJobQuery" class="">defaultFindJobQuery()</a></td><td></td></tr><tr><td><a href="class_Openclerk_Jobs_JobRunner.html#findJob" class="">findJob(Connection $db, Logger $logger)</a></td><td>Find the next job that should be executed. By default, just selects any job instance that is in the database that isn't already executing, hasn't already been finished, and hasn't errored out.</td></tr><tr><td><a href="class_Openclerk_Jobs_JobRunner.html#runOne" class="">runOne(Connection $db, Logger $logger)</a></td><td>Select and run a <a href="interface_Openclerk_Jobs_Job.html" class="">Job</a>. If the job throws an exception, the job runner will capture this exception and mark the job as failed as necessary.</td></tr>  </tbody>
</table>



<hr>

<h3>
  <small>public function</small>
  __construct()  <a name="__construct"></a>
</h3>

<blockquote>
<dl></dl></blockquote>


<hr>

<h3>
  <small>abstract function</small>
  createJob($job, <a href="interface_Db_Connection.html" class="">Connection</a> $db, Logger $logger)  <a name="createJob"></a>
</h3>

<blockquote>
<p>From the given $job arguments, create a new <a href="interface_Openclerk_Jobs_Job.html" class="">Job</a> instance that can be run.</p><dl></dl></blockquote>


<hr>

<h3>
  <small>final function</small>
  defaultFindJobQuery()  <a name="defaultFindJobQuery"></a>
</h3>

<blockquote>
<dl><dt>Returns:</dt><dd>"is_executed=0 AND is_executing=0 AND is_error=0"<br></dd></dl></blockquote>


<hr>

<h3>
  <small>public function</small>
  findJob(<a href="interface_Db_Connection.html" class="">Connection</a> $db, Logger $logger)  <a name="findJob"></a>
</h3>

<blockquote>
<p>Find the next job that should be executed. By default, just selects any job instance that is in the database that isn't already executing, hasn't already been finished, and hasn't errored out.</p><dl><dt>Returns:</dt><dd>a job array (id, job_type, [user_id], [arg_id]) or <code>false</code> if there is none<br></dd></dl></blockquote>


<hr>

<h3>
  <small>public function</small>
  runOne(<a href="interface_Db_Connection.html" class="">Connection</a> $db, Logger $logger)  <a name="runOne"></a>
</h3>

<blockquote>
<p>Select and run a <a href="interface_Openclerk_Jobs_Job.html" class="">Job</a>. If the job throws an exception, the job runner will capture this exception and mark the job as failed as necessary.</p><dl><dt>Throws:</dt><dd>Exception - if the job failed<br></dd></dl></blockquote>

</div>

<div class="footer">
  Generated by <a href="https://github.com/soundasleep/phpdoc2/" class="github">PHPDoc2</a> Fri, 24 Apr 2015 14:42:45 +1200</div>

</body>
</html>
